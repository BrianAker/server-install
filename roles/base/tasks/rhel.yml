---

- name: install basic software
  sudo: yes
  yum: name=$item state=latest
  with_items:
    - '@minimal-environment'
    - '@system-tools'
    - redhat-lsb-core
    - python-setuptools
    - curl
    - bzr
    - sudo
    - fakeroot
    - git
    - make
    - perl
    - pkgconfig
    - python
    - ruby
    - tar
    - wget

- name: set selinux
  sudo: yes
  lineinfile: dest=/etc/selinux/config regexp=^SELINUX= line=SELINUX=disabled

- name: install fedora basic software
  yum: name=$item state=latest
  sudo: yes
  with_items:
    - denyhosts
    - firewalld
    - python-pip
    - python-virtualenv
  when: ansible_distribution == 'Fedora'

- name: yum distribution-synchronization
  sudo: yes
  raw: yum distribution-synchronization -y
  when: ansible_pkg_mgr == 'yum'

- name: Install pip and virtualenv
  sudo: yes
  easy_install: name=$item
  with_items:
    - virtualenv
    - pip
  when: ansible_distribution == 'CentOS'

- name: yum remove software
  sudo: yes
  yum: name=$item state=absent
  ignore_errors: yes
  with_items:
    - BackupPC
  when: ansible_distribution == 'Fedora'
