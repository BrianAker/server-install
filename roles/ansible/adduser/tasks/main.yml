# vim:ft=yaml
---
- set_fact: ansible_dir="{{ User.home }}/.ansible"
  sudo: yes
  sudo_user: "{{ User.name }}"

- name: pip install ansible
  pip:  name="{{ item }}"
        virtualenv_command="{{ virtualenv_bin }}"
        virtualenv="{{ ansible_dir }}"
        state=present
  with_file: "{{ inventory_dir }}/files/pip/ansible.txt"
#  with_lines:
#    - 'cat {{ inventory_dir }}/files/pip/ansible.txt'
  sudo: yes
  sudo_user: "{{ User.name }}"

- name: install pyenv
  template: src=pyenv.j2
            dest="{{ ansible_dir }}/bin/pyenv"
            mode=0700
            validate='bash -n %s'
  sudo: yes
  sudo_user: "{{ User.name }}"
