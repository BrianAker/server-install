---
# Rulebook used for bootstrapping a system.
#- name: Bootstrap
#  hosts: FreeBSD
#  gather_facts: no
#  remote_user: root
#
#  roles:
#    - bootstrap/FreeBSD
#
- hosts: all
  vars_files:
     - "vars/{{ ansible_os_family }}"
     - "vars/{{ ansible_distribution }}"
     - "vars/Defaults"

  pre_tasks:
    - group_by: key={{ ansible_distribution }}

  roles:
    - role: bootstrap
    - role: sudoers
    - role: python
    - role: ntp
    - role: sshd
    - role: deploy
    - role: unattended-upgrades
    - role: bootstrap/base

- include: playbooks/upgrade.yml
