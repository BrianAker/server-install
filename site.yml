---

# Root ansible playbook
- hosts: all
  tasks:
    - name: Create groups by distribution and version
      group_by: key={{ansible_distribution}}-{{ansible_distribution_version}}

    - name: Create groups by distribution
      group_by: key={{ansible_distribution}}

    - name: Create a distribution based OS family
      group_by: key={{ansible_os_family}}

  vars:
    sshd: sshd

  roles:
    - common
    - deploy

- hosts: CentOS-6.4
  tasks:

- hosts: localhost
  roles:
    - build
#   - { role: adduser, username: foo, lp_username: brianaker, is_admin: True, has_authorized_key: False, has_lp_username: True }

- include: openstack.yml
- include: mailman.yml
- include: dnsservers.yml
- include: webservers.yml
- include: jenkins-slaves.yml
- include: jenkins-master.yml
- include: developer.yml
