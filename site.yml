---

# Root ansible playbook
- hosts: all
  tasks:
    - name: Create groups by distribution and version
      group_by: key={{ansible_distribution}}-{{ansible_distribution_version}}

    - name: Create groups by distribution
      group_by: key={{ansible_distribution}}

    - name: Create a distribution based OS family
      group_by: key={{ansible_os_family}}

  vars:
    sshd: sshd
    bind: bind

  roles:
    - common
    - deploy

- hosts: EL
  gather_facts: no
  roles:
    - bennojoy.ntp

- hosts: Fedora
  gather_facts: no
  roles:
    - bennojoy.ntp
    - firewalld

- hosts: Ubuntu
  gather_facts: no
  roles:
    - bennojoy.ntp

- include: mailman.yml
- include: dnsservers.yml
- include: webservers.yml
- include: jenkins-slaves.yml
- include: jenkins-master.yml
- include: developer.yml
- include: localhost.yml
